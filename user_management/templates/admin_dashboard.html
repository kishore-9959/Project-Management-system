<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | POLYCAB Project Management System</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
  
  <style>
    body {
      background-color: #f8f9fa;
    }
    .header-background {
      background-image: url('https://images.unsplash.com/photo-1542744094-3a31f272c490'); /* You can replace this URL */
      background-size: cover;
      background-position: center;
      padding: 60px 0;
      text-align: center;
      color: white;
    }
    .header-background h1 {
      font-weight: bold;
      font-size: 2.5rem;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    }
    .navbar-brand {
      font-weight: bold;
    }
  </style>
</head>

<body>

  Main Heading with Background
  <div class="header-background">
    <h1>POLYCAB Project Management System</h1>
  </div>

  Navbar -->
  <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="#">POLYCAB PMS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user_list_admin' %}">
              <i class="bi bi-people-fill"></i> User Management
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'task_dashboard' %}">
              <i class="bi bi-list-check"></i> Task Management
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}">
              <i class="bi bi-box-arrow-right"></i> Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  Dashboard Welcome -->
  <!-- <div class="container text-center mt-5">
    <p class="lead">Welcome to the Admin Dashboard</p>
  </div>

  Bootstrap JS -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html> --> 




{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | POLYCAB Project Management System</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  
  <style>
    body {
      background-color: #f8f9fa;
    }

    /* Header Section with Background */
    .header-background {
      background-image: url('https://images.unsplash.com/photo-1542744094-3a31f272c490'); /* Replace with custom image */
      background-size: cover;
      background-position: center;
      padding: 60px 0;
      text-align: center;
      color: rgb(204, 28, 28);
    }

    .header-background h1 {
      font-weight: bold;
      font-size: 2.5rem;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    }

    /* Navbar Styles */
    .navbar-brand {
      font-weight: bold;
    }

    /* Filter Section */
    .filter-section {
      margin-bottom: 30px;
      background: white;
      padding: 20px;
      border-radius: 10px;
    }

    .filter-section select, .filter-section button {
      padding: 10px;
      font-size: 16px;
    }

    /* Cards Section */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .card h3 {
      margin-top: 0;
      background-color: #d32f2f;
      color: white;
      padding: 10px;
      border-radius: 8px 8px 0 0;
      font-size: 18px;
      text-align: center;
    }

    .task-status {
      margin-top: 15px;
    }

    .task-status p {
      margin: 5px 0;
      font-size: 16px;
    }

    .nil {
      color: red;
      font-weight: bold;
    }

    .in-progress {
      color: orange;
      font-weight: bold;
    }

    .completed {
      color: green;
      font-weight: bold;
    }

    button {
      background-color: #d32f2f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #b71c1c;
    }/* Overall container for the cards */


    body {
            background-color: #f8f9fa;
        }

        /* Header Section with Background */
        .header-background {
            background-image: url('https://images.unsplash.com/photo-1542744094-3a31f272c490'); /* Replace with custom image */
            background-size: cover;
            background-position: center;
            padding: 60px 0;
            text-align: center;
            color: rgb(208, 25, 25);
        }

        .header-background h1 {
            font-weight: bold;
            font-size: 2.5rem;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
        }

        /* Navbar Styles */
        .navbar-brand {
            font-weight: bold;
        }
        .card {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 12px;
        }
        .card-header {
            font-weight: bold;
            text-align: center;
        }
        .task-count {
            font-size: 18px;
            margin-bottom: 10px;
        }
        .pending { color: #dc3545; } /* Red */
        .inprogress { color: #ffc107; } /* Yellow */
        .completed { color: #28a745; } /* Green */






        body {
            background-color: #f8f9fa;
        }
        .card {
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 15px;
        }
        .table th, .table td {
            vertical-align: middle;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            text-align: center;
            color: #e63946;
            margin-bottom: 30px;
        }
        #gantt {
            overflow-x: auto;
        }
      

 
   

  </style>
</head>

<body>


  





  <!-- Header Section -->
  <div class="header-background">
    <h1>POLYCAB Project Management System</h1>
  </div>

 
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="#">POLYCAB PMS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'user_list_admin' %}">
              <i class="bi bi-people-fill"></i> User Management
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'task_list' %}">
              <i class="bi bi-list-check"></i> Task Management
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'logout' %}">
              <i class="bi bi-box-arrow-right"></i> Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Dashboard Welcome -->
  <div class="container text-center mt-5">
    <p class="lead">Welcome to the Admin Dashboard</p>
  </div>
 <!-- Filter Section
 <div class="container filter-section">
  <label for="state">State:</label>
  <select id="state" onchange="loadDistricts()">
    <option value="">Select State</option>
    <option value="AP">Andhra Pradesh</option>
    <option value="TS">Telangana</option>
    <option value="TN">Tamil Nadu</option>
    <option value="KA">Karnataka</option>
    <option value="MH">Maharashtra</option>
    <option value="UP">Uttar Pradesh</option>
    <option value="DL">Delhi</option>
    <option value="WB">West Bengal</option>
    <option value="RJ">Rajasthan</option>
    <option value="MP">Madhya Pradesh</option>
  </select>

  <label for="district" class="mt-3">District:</label>
  <select id="district">
    <option value="">Select District</option>
     Districts will be populated dynamically -->
  <!-- </select>

  <button onclick="applyFilter()">Filter</button>
</div>

Load JavaScript -->
<!-- <script src="{% static 'JS/filter.js' %}"></script> -->

<!-- 
{% load static %}
<div class="container filter-section">
  <label for="state">State:</label>
  <select id="state" onchange="loadDistricts()">
    <option value="">Select State</option>
    <option value="AP">Andhra Pradesh</option>
    <option value="TS">Telangana</option>
    <option value="TN">Tamil Nadu</option>
    <option value="KA">Karnataka</option>
    <option value="MH">Maharashtra</option>
    <option value="UP">Uttar Pradesh</option>
    <option value="DL">Delhi</option>
    <option value="WB">West Bengal</option>
    <option value="RJ">Rajasthan</option>
    <option value="MP">Madhya Pradesh</option>
  </select>

  <label for="district" class="mt-3">District:</label>
  <select id="district">
    <option value="">Select District</option>
  </select>

  <button onclick="applyFilter()">Filter</button>
</div>

<script src="{% static 'JS/filter.js' %}"></script> -->



  
<div class="container mt-5">
  <h2 class="text-center mb-4">Task Milestone Status</h2>

  <div class="row">
      {% if milestone_data %}
          {% for milestone in milestone_data %}
              {% if milestone.nil_count != 0 or milestone.inprogress_count != 0 or milestone.completed_count != 0 %}
              <div class="col-md-4 mb-4">
                  <div class="card">
                      <div class="card-header bg-primary text-white">
                          {{ milestone.name }}
                      </div>
                      <div class="card-body text-center">
                          <div class="task-count pending">
                              Pending: {{ milestone.nil_count }}
                          </div>
                          <div class="task-count inprogress">
                              In Progress: {{ milestone.inprogress_count }}
                          </div>
                          <div class="task-count completed">
                              Completed: {{ milestone.completed_count }}
                          </div>
                      </div>
                  </div>
              </div>
              {% endif %}
          {% endfor %}
      {% else %}
          <div class="col-12 text-center">
              <div class="alert alert-warning" role="alert">
                  No milestone data available.
              </div>
          </div>
      {% endif %}
  </div>
</div>



{% load static %}

<!-- Timeline Chart Section -->
<div class="card">
  <div class="card-header bg-success text-white">
      <h4 class="mb-0">Timeline-wise Progress (Gantt Chart)</h4>
  </div>
  <div class="card-body">
      {% if gantt_tasks %}
      <div id="timelineChart" style="height: 600px;"></div>
      <script>
          // Send the gantt_tasks data to external js
          var ganttTasks = [
              {% for task in gantt_tasks %}
                  {
                      task: "{{ task.task }}",
                      start: "{{ task.start }}",
                      end: "{{ task.end }}",
                      color: "{{ task.color }}"
                  },
              {% endfor %}
          ];
      </script>
      <script src="{% static 'JS/gantt_chart.js' %}"></script> <!-- External JS here -->
      {% else %}
      <p class="text-center">No Gantt tasks available.</p>
      {% endif %}
  </div>
</div>



<!-- Bootstrap JS Bundle (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>





 
<!-- Bootstrap JS Bundle (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


<!-- Bootstrap JS Bundle (optional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>



  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // function loadDistricts() {
    //   var state = document.getElementById('state').value;
    //   var districtSelect = document.getElementById('district');
      
    //   var districts = {
    //     "AP": ["West Godavari", "East Godavari", "Krishna", "Visakhapatnam", "Kurnool", "Chittoor"],
    //     "TS": ["Hyderabad", "Warangal", "Khammam", "Karimnagar", "Nizamabad", "Rangareddy"],
    //     "TN": ["Chennai", "Coimbatore", "Madurai", "Salem", "Tirunelveli"],
    //     "KA": ["Bengaluru", "Mysuru", "Hubballi", "Mangaluru", "Belagavi"],
    //     "MH": ["Mumbai", "Pune", "Nagpur", "Thane", "Nashik"],
    //     "UP": ["Agra", "Lucknow", "Kanpur", "Varanasi", "Ghaziabad"],
    //     "DL": ["Central Delhi", "North Delhi", "South Delhi", "East Delhi", "West Delhi"],
    //     "WB": ["Kolkata", "Howrah", "Midnapore", "North 24 Parganas", "South 24 Parganas"],
    //     "RJ": ["Jaipur", "Udaipur", "Jodhpur", "Ajmer", "Kota"],
    //     "MP": ["Bhopal", "Indore", "Gwalior", "Jabalpur", "Ujjain"]
    //   };

    //   // Clear previous options
    //   districtSelect.innerHTML = "<option value=''>Select District</option>";

    //   // Populate new options
    //   if (districts[state]) {
    //     districts[state].forEach(function(district) {
    //       var option = document.createElement("option");
    //       option.value = district;
    //       option.textContent = district;
    //       districtSelect.appendChild(option);
    //     });
    //   }
    // }




   
  // Object containing the state and district mappings
  var districts = {
    'AP': ['East Godavari', 'West Godavari', 'Visakhapatnam'],
    'TS': ['Hyderabad', 'Ranga Reddy', 'Khammam'],
    'KA': ['Bangalore', 'Mysuru', 'Hubballi'],
    'TN': ['Chennai', 'Coimbatore', 'Madurai'],
    'MH': ['Mumbai', 'Pune', 'Nagpur'],
    'OD': ['Bhubaneswar', 'Cuttack', 'Rourkela'],
    'RJ': ['Jaipur', 'Jodhpur', 'Udaipur'],
    'GJ': ['Ahmedabad', 'Rajkot', 'Vadodara'],
    'WB': ['Kolkata', 'Howrah', 'Siliguri'],
    'UP': ['Lucknow', 'Varanasi', 'Agra'],
  };

  // Get the state and district dropdown elements
  var stateSelect = document.getElementById('id_state');
  var districtSelect = document.getElementById('id_district');

  // Event listener to handle the change of state
  stateSelect.addEventListener('change', function() {
    var state = stateSelect.value;

    // Clear previous district options (except the placeholder)
    districtSelect.innerHTML = "<option value=''>Select District</option>";

    // If districts for the selected state are available, populate the district dropdown
    if (districts[state]) {
      districts[state].forEach(function(district) {
        var option = document.createElement("option");
        option.value = district;
        option.textContent = district;
        districtSelect.appendChild(option);
      });
    }

    // Retain the previously selected district if it exists
    var currentDistrict = "{{ form.district.value }}";  // Get the selected district from the form instance
    if (currentDistrict && districts[state].includes(currentDistrict)) {
      districtSelect.value = currentDistrict; // Set the previously selected district
    }
  });

  // Optionally, initialize the district dropdown based on the current state selection on page load
  window.onload = function() {
    var state = stateSelect.value;
    if (state && districts[state]) {
      districts[state].forEach(function(district) {
        var option = document.createElement("option");
        option.value = district;
        option.textContent = district;
        districtSelect.appendChild(option);
      });
    }

    // Retain the previously selected district if it exists
    var currentDistrict = "{{ form.district.value }}";  // Get the selected district from the form instance
    if (currentDistrict && districts[state].includes(currentDistrict)) {
      districtSelect.value = currentDistrict; // Set the previously selected district
    }
  };



    function applyFilter() {
      var state = document.getElementById('state').value;
      var district = document.getElementById('district').value;

      if (state && district) {
        alert("Filtering by State: " + state + " and District: " + district);
        // You can replace the alert with an actual function to display filtered data
      } else {
        alert("Please select both State and District.");
      }
    }
  </script>

</body>
</html>






<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

      Container for the dashboard -->
    <!-- <div class="container mt-4"> -->

        <!-- Dashboard Title -->
        <!-- <h1 class="display-4 text-center text-primary">Task Dashboard</h1> -->

        <!-- Navigation Bar -->
        <!-- <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm mb-4">
            <a class="navbar-brand" href="#">Task Management</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'task_list' %}">Task List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'create_task' %}">Create Task</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}">Logout</a>
                    </li>
                </ul>
            </div>
        </nav> -->

        <!-- View All Tasks Button -->
        <!-- <div class="d-flex justify-content-center mb-4">
            <a href="{% url 'task_list' %}" class="btn btn-lg btn-primary">View All Tasks</a>
        </div> -->

        <!-- Placeholder for content (like task cards or data) -->
        <!-- <div class="row">
            <div class="col-md-12">
                 Add any dynamic content here like task cards -->
                <!-- <div class="alert alert-info" role="alert">
                    <strong>Welcome to the Task Dashboard!</strong> Manage all your tasks efficiently.
                </div>
            </div> -->
        <!-- </div>

    </div> -->

    <!-- Bootstrap JS -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> -->


